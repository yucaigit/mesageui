import { ImApiEvents } from "./im/events/public/im-api-events";
export interface GoEasyOptions {
    host: string;
    appkey: string;
    modules: Array<string>;
    forceTLS?: boolean;
    supportOldBrowser?: boolean;
    allowNotification?: boolean;
}
export declare abstract class CallBackOptions {
    onSuccess?(result?: any): void;
    onFailed?(errInfo?: any): void;
}
export interface ConnectOptions extends CallBackOptions {
    id?: string | number;
    data: string | any;
    otp?: string;
    onProgress?(progress: number): void;
}
export interface PresenceEvent<T> {
    action: string;
    time: number;
    data: T;
    id: string;
}
export interface PresenceEvents<T> {
    channel: string;
    clientAmount: number;
    events: PresenceEvent<T>[];
    userAmount: number;
}
export declare type IMEvent = keyof typeof ImApiEvents;
export declare type MessageCallback = (message: any) => void;
export interface PublishOptions extends CallBackOptions {
    channel: string;
    message: string;
    accessToken?: string;
    notification?: {
        title: string;
        body: string;
    };
}
export interface SubscribeOptions extends CallBackOptions {
    channel: string;
    accessToken?: string;
    onMessage(message: {
        channel: string;
        content: string;
    }): void;
}
export interface UnsubscribeOptions extends CallBackOptions {
    channel: string;
}
export interface SubscribePresenceOptions extends CallBackOptions {
    channel: string;
    onPresence<T = any>(presenceEvents: PresenceEvents<T>): void;
}
export interface UnsubscribePresenceOptions extends CallBackOptions {
    channel: string;
}
export interface HistoryOptions extends CallBackOptions {
    channel: string;
    limit: number;
    onSuccess(results: {
        code: number;
        content: {
            messages: Array<{
                time: number;
                content: string;
            }>;
        };
    }): void;
}
export interface HereNowOptions extends CallBackOptions {
    channels: string[];
    includeUsers?: boolean;
    distinct?: boolean;
    onSuccess(results: {
        code: number;
        content: {
            channels: {
                [key: string]: {
                    channel: string;
                    clientAmount: number;
                    userAmount: number;
                    users: any[];
                };
            };
        };
    }): void;
}
export interface HereNowByUserIdsOptions extends CallBackOptions {
    userIds: string[];
    distinct?: boolean;
    onSuccess(results: {
        code: number;
        content: Array<{
            id: string;
            data: any;
        }>;
    }): void;
}
export declare enum Scene {
    PRIVATE = "private",
    GROUP = "group",
    SYSTEM = "system"
}
export interface To {
    type: Scene;
    id: string;
    data: any;
}
export interface MessageCreateOptions {
    to: To;
    notification?: {
        title: string;
        body: string;
    };
    onProgress?: Function;
}
export interface TextMessageCreateOptions extends MessageCreateOptions {
    text: string;
}
export interface FileMessageCreateOptions extends MessageCreateOptions {
    file: any;
}
export interface CustomMessageCreateOptions extends MessageCreateOptions {
    type: string;
    payload: any;
}
export interface IMHistoryQueryOptions extends CallBackOptions {
    userId?: string;
    groupId?: string;
    lastTimestamp?: number;
    limit?: number;
}
export interface UploadOptions extends CallBackOptions {
    file: File;
    name: string;
    onProgress(progress: ProgressEvent<EventTarget>): void;
}
export interface MessageSendOptions extends CallBackOptions {
    message: IMMessage;
    accessToken?: string;
}
export interface MarkGroupMessageAsReadOptions extends CallBackOptions {
    groupId: string;
}
export interface MarkPrivateMessageAsReadOptions extends CallBackOptions {
    userId: string;
}
export interface LatestConversationsOptions extends CallBackOptions {
    onSuccess(result: {
        code: number;
        content: {
            unreadTotal: number;
            conversations: ConversationDTO[];
        };
    }): void;
}
export interface PrivateConversationRemoveOptions extends CallBackOptions {
    userId: string;
}
export interface GroupConversationRemoveOptions extends CallBackOptions {
    groupId: string;
}
export interface PrivateConversationTopOptions extends CallBackOptions {
    userId: string;
    top: boolean;
}
export interface GroupConversationTopOptions extends CallBackOptions {
    groupId: string;
    top: boolean;
}
export interface SubscribeUserPresenceOptions extends CallBackOptions {
    userIds: string[];
}
export interface UnsubscribeUserPresenceOptions extends CallBackOptions {
    userId: string;
}
export interface IMHereNowOptions extends CallBackOptions {
    userIds: string[];
    onSuccess(result: {
        code: number;
        content: Array<{
            id: string;
            data: any;
        }>;
    }): void;
}
export interface SubscribeGroupOptions extends CallBackOptions {
    groupIds: string[];
    accessToken?: string;
}
export interface UnsubscribeGroupOptions extends CallBackOptions {
    groupId: string;
}
export interface SubscribeGroupPresenceOptions extends CallBackOptions {
    groupIds: string[];
}
export interface UnsubscribeGroupPresenceOptions extends CallBackOptions {
    groupId: string;
}
export interface GroupHereNowOptions extends CallBackOptions {
    groupId: string;
    onSuccess(result: {
        code: number;
        content: Array<{
            id: string;
            data: any;
        }>;
    }): void;
}
export interface GroupOnlineCountOptions extends CallBackOptions {
    groupId: string;
    onSuccess(result: {
        code: number;
        content: {
            onlineCount: number;
        };
    }): void;
}
export interface MessageRecallOptions extends CallBackOptions {
    messages: Array<IMMessage>;
}
export interface MessageDeleteOptions extends CallBackOptions {
    messages: Array<IMMessage>;
}
export interface IMMessage {
    type: string;
    senderData?: string;
    read?: boolean;
    recalled: boolean;
    receiverId?: string;
    groupId?: string;
    timestamp?: number;
    senderId: string;
    payload: IAbstractMessagePayload;
    messageId: string;
    status: MessageStatus;
}
export interface IAbstractMessagePayload {
}
export interface ITextMessagePayload extends IAbstractMessagePayload {
    text: string;
}
export interface IVideoMessagePayload extends IAbstractMessagePayload {
    video: IGoEasyVideo;
    thumbnail: IGoEasyThumbnail;
}
export interface IGoEasyThumbnail {
    name: string;
    url: string;
    width: number;
    height: number;
    contentType: string;
}
export interface IGoEasyVideo {
    name: string;
    url: string;
    width: number;
    height: number;
    contentType: string;
    size: number;
    duration: number;
}
export interface IFileMessagePayload extends IAbstractMessagePayload {
    url: string;
    size: number;
    name: string;
    contentType: string;
}
export interface IImageMessagePayload extends IFileMessagePayload {
    width: number;
    height: number;
}
export interface IAudioMessagePayload extends IFileMessagePayload {
    duration: number;
}
export declare enum MessageStatus {
    NEW = "new",
    SENDING = "sending",
    SUCCESS = "success",
    FAIL = "fail"
}
export declare class ConversationDTO {
    type: string;
    groupId: string;
    userId: string;
    data: object;
    unread: number;
    lastMessage: IMMessage;
    top: boolean;
}
/**
 * @description PubSub 类
 */
export declare class PubSub {
    static instance: any;
    private goEasySocket;
    private publisher;
    private subscriber;
    private presence;
    private histories;
    private hereNows;
    private options;
    private neverConnect;
    constructor(options: GoEasyOptions);
    initialGoEasySocket(goEasySocket: any): void;
    initialBeforeConnect(): void;
    private validateOptions;
    publish(options: PublishOptions): void;
    subscribe(options: SubscribeOptions): void;
    unsubscribe(options: UnsubscribeOptions): void;
    subscribePresence(options: SubscribePresenceOptions): void;
    unsubscribePresence(options: UnsubscribePresenceOptions): void;
    history(options: HistoryOptions): void;
    hereNow(options: HereNowOptions): void;
    hereNowByUserIds(options: HereNowByUserIdsOptions): void;
}
/**
 * @description IM 聊天类
 */
export declare class GoEasyIM {
    options: GoEasyOptions;
    constructor(options: GoEasyOptions);
    initialBeforeConnect(user: any): void;
    initialAfterConnect(): void;
    initialGoEasySocket(goEasySocket: any): void;
    private validateOptions;
    private validateMessageToData;
    on(event: IMEvent, callBack: MessageCallback): void;
    createTextMessage(createOptions: TextMessageCreateOptions): IMMessage;
    createImageMessage(createOptions: FileMessageCreateOptions): IMMessage;
    createFileMessage(createOptions: FileMessageCreateOptions): IMMessage;
    createAudioMessage(createOptions: FileMessageCreateOptions): IMMessage;
    createVideoMessage(createOptions: FileMessageCreateOptions): IMMessage;
    createCustomMessage(createOptions: CustomMessageCreateOptions): IMMessage;
    sendMessage(sendOptions: MessageSendOptions): void;
    recallMessage(messageRecallOptions: MessageRecallOptions): void;
    deleteMessage(messageDeleteOptions: MessageDeleteOptions): void;
    markGroupMessageAsRead(options: MarkGroupMessageAsReadOptions): void;
    markPrivateMessageAsRead(options: MarkPrivateMessageAsReadOptions): void;
    latestConversations(options: LatestConversationsOptions): void;
    removePrivateConversation(options: PrivateConversationRemoveOptions): void;
    removeGroupConversation(options: GroupConversationRemoveOptions): void;
    topPrivateConversation(options: PrivateConversationTopOptions): void;
    topGroupConversation(options: GroupConversationTopOptions): void;
    history(options: IMHistoryQueryOptions): void;
    subscribeUserPresence(options: SubscribeUserPresenceOptions): void;
    unsubscribeUserPresence(options: UnsubscribeUserPresenceOptions): void;
    hereNow(options: IMHereNowOptions): void;
    subscribeGroup(options: SubscribeGroupOptions): void;
    unsubscribeGroup(options: UnsubscribeGroupOptions): void;
    subscribeGroupPresence(options: SubscribeGroupPresenceOptions): void;
    unsubscribeGroupPresence(options: UnsubscribeGroupPresenceOptions): void;
    groupHereNow(options: GroupHereNowOptions): void;
    groupOnlineCount(options: GroupOnlineCountOptions): void;
}
/**
 * @description GoEasy 对外接口核心类
 */
export default class GoEasy {
    static instance: GoEasy;
    static readonly version: string;
    static readonly IM_EVENT: typeof ImApiEvents;
    static readonly IM_SCENE: typeof Scene;
    readonly im: GoEasyIM;
    readonly pubsub: PubSub;
    private goEasySocket;
    private options;
    private notification;
    private constructor();
    static getInstance(options: GoEasyOptions): GoEasy;
    connect(options: ConnectOptions): void;
    disconnect(options: CallBackOptions): void;
    getConnectionStatus(): string;
    private validateOptions;
    onClickNotification(clickHandler: MessageCallback): void;
    private confirmUserId;
}
